## 栈区和堆区内存分配区别

#### 栈区
- 栈区存放的都是与函数有关的内容，有函数就有栈，函数进入、函数执行、函数返回都离不开栈。栈所存放的内容有断点地址也就是返回地址（调用时的原代码的下一语句的地址）、函数参数、函数内部动态局部变量、函数返回的数据。
- 由编译器自动分配释放 ，存放函数的参数值，局部变量的值，函数返回值等，内存的分配是连续的，类似于平时我们所说的栈，如果还不清楚，那么就把它想成数组，它的内存分配是连续分配的，即，所分配的内存是在一块连续的内存区域内．当我们声明变量时，那么编译器会自动接着当前栈区的结尾来分配内存

#### 堆区

- 所提供的内存是不连续的，从低地址向高地址分配，每次malloc分配所得的内存块由链表串起来。
- 由程序员malloc分配、free释放，所分配的内存块直到free才会释放，生存期由程序员决定。若程序员忘记free了，则所分配的内存则会一直从malloc存在到程序结束，程序结束后可能会由OS回收，如果没被回收则会造成内存泄露。
- 每一次malloc，所得的内存块都是连续的，只是上次与下次之间分配的不连续，这些不连续内存块由链表组织起来，每malloc一次，就往链表中加入一块连续内存块，就这单块的内存块来说是连续的，只是次与次之间的分配不是连续的，要用链表组织串起来。因为是不连续分配，所以会存在内存碎片的问题，所以最好不要频繁的malloc，也尽量malloc较大一些的内存。
- 堆区存放的内容由用户决定，malloc返回的内存既可以用于存储一个数据，也可用于类似数组的存放，也可用于存储一个结构体，还可以用来存放一个字符串。
- 堆是由用户的高级语言提供的，虽然对用户是灵活了，但对系统来说，高级语言灵活的代价就是复杂的指令封装来实现执 行，这样的话堆的执行效率肯定就低。它不仅涉及链表需要算法；因为是用户基于内存的操作，所以必要时还会造成系统调用和用户态、内核态的切换；而且因为堆是不连续分配，还会造成内存碎片；而因为编程人员的粗心，还有可能造成内存泄露。所以堆不仅执行效率低，对内存的利用效率也低。具体看——链接的具体解释。
  d、堆的大小受限于计算机系统中有效的虚拟内存。堆获得的空间也比较大。